<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.58">
<title data-react-helmet="true">Gathering on-site measurements | Predicting Insect Pest Phenology</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Gathering on-site measurements | Predicting Insect Pest Phenology"><meta data-react-helmet="true" name="description" content="Two methods are proposed for gathering on-site measurements:"><meta data-react-helmet="true" property="og:description" content="Two methods are proposed for gathering on-site measurements:"><meta data-react-helmet="true" property="og:url" content="https://frareb.github.io/pi2p_docu/docs/docClim02"><link data-react-helmet="true" rel="shortcut icon" href="/pi2p_docu/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://frareb.github.io/pi2p_docu/docs/docClim02"><link rel="stylesheet" href="/pi2p_docu/styles.e6e8e8cd.css">
<link rel="preload" href="/pi2p_docu/styles.feb7e3e1.js" as="script">
<link rel="preload" href="/pi2p_docu/runtime~main.891dec3d.js" as="script">
<link rel="preload" href="/pi2p_docu/main.ee0df95b.js" as="script">
<link rel="preload" href="/pi2p_docu/common.0e9cdda5.js" as="script">
<link rel="preload" href="/pi2p_docu/22.f466fe81.js" as="script">
<link rel="preload" href="/pi2p_docu/23.524ea382.js" as="script">
<link rel="preload" href="/pi2p_docu/83a783d7.499b39fd.js" as="script">
<link rel="preload" href="/pi2p_docu/17896441.8124e14b.js" as="script">
<link rel="preload" href="/pi2p_docu/9f67a55a.c55b799f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/pi2p_docu/"><img class="navbar__logo" src="/pi2p_docu/img/logo.svg" alt="My Site Logo"><strong class="navbar__title">PI2P</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/pi2p_docu/docs/">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://pi2p.ird.fr" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">PI2P website</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/pi2p_docu/"><img class="navbar__logo" src="/pi2p_docu/img/logo.svg" alt="My Site Logo"><strong class="navbar__title">PI2P</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/pi2p_docu/docs/">Docs</a></li><li class="menu__list-item"><a href="https://pi2p.ird.fr" target="_blank" rel="noopener noreferrer" class="menu__link">PI2P website</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp" role="complementary"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">PI2P</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/pi2p_docu/docs/">Introduction</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Climate</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/pi2p_docu/docs/docClim01">Climate monitoring</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/pi2p_docu/docs/docClim02">Gathering on-site measurements</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/pi2p_docu/docs/docClim03">Forwarding data to the server</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Insects</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/pi2p_docu/docs/docPest01">Insect monitoring</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Gathering on-site measurements</h1></header><div class="markdown"><p>Two methods are proposed for gathering on-site measurements:</p><ul><li>using a specific card, the PI2Puino (Arduino-based), which is the most easy and recommended way;</li><li>using a simple Arduino board, like an Arduino Nano, or Arduino Pro Mini, mostly for prototyping or very small batches of sensors.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="1-the-pi2puino"></a>1. The PI2Puino<a aria-hidden="true" tabindex="-1" class="hash-link" href="#1-the-pi2puino" title="Direct link to heading">#</a></h2><p>The PI2Puino is a very integrated board, that includes the LoRa module (with an embedded antenna), an Arduino-compatible microcontroller and a battery holder; it was designed specifically for the PI2P project, and is provided with a complete casing system.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="11-how-to-get-it"></a>1.1. How to get it?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#11-how-to-get-it" title="Direct link to heading">#</a></h3><p>PI2P is a research project, so you&#x27;ll likely need to make your own boards. Anyway, if there&#x27;s a local research laboratory near you that&#x27;s already part of the network, you might contact them to get a small batch of boards. If you need to make it yourself, <em>don&#x27;t panic</em>, as the process is quite easy, and doesn&#x27;t require expensives tools.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="12-what-tools-do-i-need"></a>1.2. What tools do I need?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#12-what-tools-do-i-need" title="Direct link to heading">#</a></h3><p>In order to make the board, you&#x27;ll need a soldering iron, and... that&#x27;s it! The board was designed so that every single component on it is easy to solder, so that you don&#x27;t waste your time trying to solder the boards.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="13-how-to-make-the-pcb"></a>1.3. How to make the PCB?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#13-how-to-make-the-pcb" title="Direct link to heading">#</a></h3><p>You can take two paths here: either make the board in local facilities, but please make sure to meet the minimal requirements below. Otherwise, the recommended way is to send it to a professionnal PCB manufacturer of your choice. For either of theses choices, you&#x27;ll need, at least, to be able to respect the following criterias:</p><ul><li>the board needs to have a solder mask; this is because they will be exposed to harsh meteorological conditions, and a solder mask protects the copper layers for oxidation;</li><li>for the same reasons as above, please use tainted vias when making the board;</li><li>the minimal requirements are: 2 layers board with 1oz copper, 0.6mm trace width, 0.3mm clearance, 0.8mm via size, 0.4mm via drill.</li></ul><p>Once you&#x27;ve arranged all of these requirements with your PCB manufacturer, then you can download the Gerber files <a href="example.org">here</a>, and just send them; the board size is 97x47mm, so you may panelize it (1x2 or 2x4) to get a better price.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="14-what-components-do-i-need"></a>1.4. What components do I need?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#14-what-components-do-i-need" title="Direct link to heading">#</a></h3><p>The table list all the components you need, with manufacturer part number when useful, but you&#x27;ll need to add the sensors you need.</p><table><thead><tr><th>Marking</th><th>Description</th><th>Value</th><th>Package</th><th>Part N.</th></tr></thead><tbody><tr><td>L1</td><td>Antenna impedance matching inductance</td><td>Wire</td><td>None</td><td>None</td></tr><tr><td>C1</td><td>Antenna impedance matching capacitor</td><td>None</td><td>None</td><td>None</td></tr><tr><td>C2, C3</td><td>Decoupling capacitors</td><td>100 nF</td><td>1206 (3216 Metric)</td><td>Mainstream</td></tr><tr><td>R1, R2, R3, R4</td><td>Pull-up/down resistors</td><td>1k - 10k</td><td>1206 (3216 Metric)</td><td>Mainstream</td></tr><tr><td>U1</td><td>868 MHz LoRa module</td><td>RFM95</td><td>ESP-like</td><td>HopeRF RFM95W-868S2</td></tr><tr><td>U2</td><td>Main microcontroller</td><td>AtMega328</td><td>DIP-28</td><td>Microchip ATMega328P-PU</td></tr></tbody></table><p>For the impedance matching components, the value will depend on your PCB manufacturer; for a prototype, you can have a short instead of the inductance, and an open-circuit for the capacitor.</p><p>For the Atmega, some manufacturers provide them with the Arduino bootloader; you can choose them if you want to go quick, or do not have an Arduino to program the board. If it has no bootloader, then you need to populate header J2 to flash it yourself; otherwise, simply fill the holes with solder to prevent oxidation.</p><p>For the connectors, you need to populate at least J4 with a standard female pin header connector (2.54 mm); this connector is used to program the board using a FT232 module, that you&#x27;ll need to buy somewhere. The two other headers, J1 and J3 are used to plug the sensors; it might be convenient, for a prototype board, to have pin headers on them; otherwise, solder the sensors&#x27; pins directly on the board.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="15-how-to-assemble-the-board"></a>1.5. How to assemble the board?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#15-how-to-assemble-the-board" title="Direct link to heading">#</a></h3><p>Once you&#x27;ve gathered the components and the board, you can grab your soldering iron, and simply follow the steps:</p><ol><li>start by soldering the four resistors and the two capacitors; the recommended method is to add solder to one side, place the component using this bit of solder, and once it&#x27;s flat, solder the other side;</li><li>then, add the LoRa module; you can start with one pin, then position the component correctly, solder the opposite pin, and it should stay in place while you&#x27;re doing the others;</li><li>you can then add the microcontroller; if you want to have the batteries on the board, you need to solder it &quot;from the top&quot;, to prevent the solder blobs from being on the batteries casing;</li><li>do not forget to make a short between the antenna and the LoRa module (pad L1), if you&#x27;re not using any impedance-matching network;</li><li>finally add the batteries and pins as desired.</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="16-how-to-flash-bootloader-to-the-board"></a>1.6. How to flash bootloader to the board?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#16-how-to-flash-bootloader-to-the-board" title="Direct link to heading">#</a></h3><p>So now you&#x27;ve got a perfect board, but how can you program it? Well, first, if you choose an AtMega that has no bootloader on it, you must flash the bootloader to it. A bootloader is a small program that will allow us to program the board standalone, without using an external programmer. For this step, you&#x27;ll need an Arduino, or an AtMega programmer; it is only needed once, to flash the bootloader. Start by flashing the ArduinoISP sketch onto your Arduino board (can be found on the IDE in File &gt; Examples &gt; ArduinoISP).</p><p>Once you&#x27;ve flashed the ArduinoISP sketch, connect your Arduino ISP pins into the ISP pins of the PI2Puino; the ISP pins are a dual-row male header on the board, you should see it immediately; the pins are the same on the two boards, and look like this:</p><p><img src="https://www.arduino.cc/en/uploads/Tutorial/ICSPHeader.jpg"></p><p><strong>Be careful</strong> : do not connect the Arduino reset pin to the ISP reset pin of the PI2Puino; instead, use pin D10 of the Arduino as a reset pin.</p><p>Once you&#x27;ve connected everything, plug the Arduino (you <strong>must</strong> remove the batteries from PI2Puino before), and open the IDE to install MiniCore, as documented on <a href="https://github.com/MCUdude/MiniCore#how-to-install" target="_blank" rel="noopener noreferrer">this page</a>. Once installed, go to the &quot;Tools&quot; menu, and make the following configuration:</p><ul><li>board: MiniCore &gt; AtMega328</li><li>clock: Internal 4MHz</li><li>BOD: BOD 1.8V</li><li>variant: 328P/PA</li><li>bootloader: Yes (UART0)</li><li>programmer: Arduino as ISP (MiniCore)</li></ul><p>Finally, press the &quot;Burn bootloader&quot; button, and just wait for the operation to complete; if it fails, check your wiring.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="17-how-to-program-the-board"></a>1.7. How to program the board?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#17-how-to-program-the-board" title="Direct link to heading">#</a></h3><p>Finally! You got the components, made the board, flashed the bootloader, now it&#x27;s time to program it for real! To do this, you need (as stated above) a serial programming interface, for instance a FT232 module; the board as a connector (J4) that suits perfectly for this module, so just plug it in, plug your computer to the module, and upload a program using the same configuration as above. Your program should now work perfectly!</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="2-alternatives"></a>2. Alternatives<a aria-hidden="true" tabindex="-1" class="hash-link" href="#2-alternatives" title="Direct link to heading">#</a></h2><p>If you&#x27;re looking at experimenting with the project before joining the network, then you might be interested in making a single prototype board with no overhead for development purposes. In this case, you can use any Arduino to make a demo board.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="21-what-connections-need-to-be-made"></a>2.1. What connections need to be made?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#21-what-connections-need-to-be-made" title="Direct link to heading">#</a></h3><p>The example below gives you a way to connect the RFM95 to an Arduino Nano; you can use any kind of board, <em>if it is 3V3-compatible</em>. Once the RFM95 is connected, you can connect any sensors you like, and connect the batteries you need.</p><p><img src="/pi2p_docu/img/Arduino_Nano_RFM95.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="3-adding-sensors-and-programming-the-board"></a>3. Adding sensors and programming the board<a aria-hidden="true" tabindex="-1" class="hash-link" href="#3-adding-sensors-and-programming-the-board" title="Direct link to heading">#</a></h2><p>Once your board is ready, you&#x27;ll need to connect sensors to it; this section aims to explain the three simple steps to do it:</p><ul><li>generating an ecnryption key;</li><li>copying the example code, and making it run;</li><li>adding custom sensors.</li></ul><p>In this section, you&#x27;re supposed to have downloaded the entire <a href="https://github.com/frareb/pi2p/tree/master/Task03" target="_blank" rel="noopener noreferrer"><code>Task03</code> directory</a> of the main Github repository.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="31-how-to-generate-a-key"></a>3.1. How to generate a key?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#31-how-to-generate-a-key" title="Direct link to heading">#</a></h3><p>Communication between the board and the gateway is encrypted; in order for this encryption to work, you&#x27;ll need to generate a secured key. There are several ways to do this, an one is to use <a href="https://www.browserling.com/tools/random-hex" target="_blank" rel="noopener noreferrer">this random hexadecimal generator</a>, and generate 16-digit codes; for example, we&#x27;ll take &quot;123456789ABCDEF0&quot;.</p><p>Now get the <a href="https://github.com/frareb/pi2p/blob/master/Task03/sit_final/example_key_expand.c">SIT key expansion algorithm</a>, insert your key, splitted into 2-digit blocks, in the <code>key</code> variable, compile the code and run it. For instance, on GNU/Linux, you can use <code>gcc</code>:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">gcc -o key_expand sit.c example_key_expand.c</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">./key_expand</span></div></div></div></div></div><p>You should get something like: <code>Expanded key: 55BA BDCC 410C 4C2F E555</code>, which is your expanded key; keep it in mind, as you&#x27;ll need to configure it on both the gateway and the sensor board.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="32-how-to-configure-the-demo"></a>3.2. How to configure the demo?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#32-how-to-configure-the-demo" title="Direct link to heading">#</a></h3><p>Once you&#x27;ve downloaded the entire <code>Task03</code> directory, copy the files <code>sit.c</code> and <code>sit.h</code> from <code>sit_final</code> into the <code>rfm95_arduino</code> directory, and rename <code>sit.c</code> into <code>sit.cpp</code>. When this is done, you can open the <code>rfm95_arduino</code> code inside the Arduino IDE.</p><p>First, begin by adding your expanded key after <code>uint16_t key[5] =</code> in the Arduino file; this will ensure proper encryption on this side. You can then compile and upload the sketch, as documented in 1.7. You should see no error, and your board is now sending data!</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="33-what-are-the-default-sensors"></a>3.3. What are the default sensors?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#33-what-are-the-default-sensors" title="Direct link to heading">#</a></h3><p>In the given Arduino sketch, two sensors are preconfigured: a <em>DS18B20</em>, that you&#x27;ll need to connect to the <code>OW</code> (or <code>D9</code>) pin, and a <code>DHT11</code>, that works using some custom protocol, so it is connected to <code>D7</code> but you ca easily change this pin.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="34-how-to-add-custom-sensors"></a>3.4. How to add custom sensors?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#34-how-to-add-custom-sensors" title="Direct link to heading">#</a></h3><p>The demo provides very useful functions that you may want to use in order to add custom sensors to the board; usually, you will start with a library setup inside the <code>setup</code> function. Once it&#x27;s done, you can do the measurements at the beginning of the loop, and send data at the end - before going to sleep, take for example this loop code:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-cpp codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">loop</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Update timestamps in queue</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">stored_pkts_refresh</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Read sensors values</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  sensors_event_t humidity_results</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  dht</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">humidity</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">getEvent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">humidity_results</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  dht</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">temperature</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">getEvent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">temperature_results</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  pkt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">hi</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">type </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;H&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  pkt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">hi</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">value </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> humidity_results</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">relative_humidity</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  pkt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">hi</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">timeshift </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  pkt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">hi</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">id </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">pkt_send_with_queue</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">pkt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Sleep for a minute</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">delay</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">500</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">sleep_enter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">7</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div></div></div></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/pi2p_docu/docs/docClim01"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Climate monitoring</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/pi2p_docu/docs/docClim03"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Forwarding data to the server »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-the-pi2puino" class="table-of-contents__link">1. The PI2Puino</a><ul><li><a href="#11-how-to-get-it" class="table-of-contents__link">1.1. How to get it?</a></li><li><a href="#12-what-tools-do-i-need" class="table-of-contents__link">1.2. What tools do I need?</a></li><li><a href="#13-how-to-make-the-pcb" class="table-of-contents__link">1.3. How to make the PCB?</a></li><li><a href="#14-what-components-do-i-need" class="table-of-contents__link">1.4. What components do I need?</a></li><li><a href="#15-how-to-assemble-the-board" class="table-of-contents__link">1.5. How to assemble the board?</a></li><li><a href="#16-how-to-flash-bootloader-to-the-board" class="table-of-contents__link">1.6. How to flash bootloader to the board?</a></li><li><a href="#17-how-to-program-the-board" class="table-of-contents__link">1.7. How to program the board?</a></li></ul></li><li><a href="#2-alternatives" class="table-of-contents__link">2. Alternatives</a><ul><li><a href="#21-what-connections-need-to-be-made" class="table-of-contents__link">2.1. What connections need to be made?</a></li></ul></li><li><a href="#3-adding-sensors-and-programming-the-board" class="table-of-contents__link">3. Adding sensors and programming the board</a><ul><li><a href="#31-how-to-generate-a-key" class="table-of-contents__link">3.1. How to generate a key?</a></li><li><a href="#32-how-to-configure-the-demo" class="table-of-contents__link">3.2. How to configure the demo?</a></li><li><a href="#33-what-are-the-default-sensors" class="table-of-contents__link">3.3. What are the default sensors?</a></li><li><a href="#34-how-to-add-custom-sensors" class="table-of-contents__link">3.4. How to add custom sensors?</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/pi2p_docu/docs/">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/pi2p_docu/docs/docClim01/">Climate</a></li><li class="footer__item"><a class="footer__link-item" href="/pi2p_docu/docs/docPest01/">Insects</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://pi2p.ird.fr" target="_blank" rel="noopener noreferrer" class="footer__link-item">PI2P Website</a></li><li class="footer__item"><a href="http://www.egce.cnrs-gif.fr/?p=1196" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/pi2p_docu/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/frareb/pi2p" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright © 2020 PI2P, This projet is funded by ANR grant number <a href="https://anr.fr/Project-ANR-19-CE32-0001">ANR-19-CE32-0001.</a></div></div></div></footer></div>
<script src="/pi2p_docu/styles.feb7e3e1.js"></script>
<script src="/pi2p_docu/runtime~main.891dec3d.js"></script>
<script src="/pi2p_docu/main.ee0df95b.js"></script>
<script src="/pi2p_docu/common.0e9cdda5.js"></script>
<script src="/pi2p_docu/22.f466fe81.js"></script>
<script src="/pi2p_docu/23.524ea382.js"></script>
<script src="/pi2p_docu/83a783d7.499b39fd.js"></script>
<script src="/pi2p_docu/17896441.8124e14b.js"></script>
<script src="/pi2p_docu/9f67a55a.c55b799f.js"></script>
</body>
</html>